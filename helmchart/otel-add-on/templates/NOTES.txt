{{- if .Values.asciiArt }}
:::^.     .::::^:     :::::::::::::::    .:::::::::.                   .^.                  
7???~   .^7????~.     7??????????????.   :?????????77!^.              .7?7.                 
7???~  ^7???7~.       ~!!!!!!!!!!!!!!.   :????!!!!7????7~.           .7???7.                
7???~^7????~.                            :????:    :~7???7.         :7?????7.               
7???7????!.           ::::::::::::.      :????:      .7???!        :7??77???7.              
7????????7:           7???????????~      :????:       :????:      :???7?5????7.             
7????!~????^          !77777777777^      :????:       :????:     ^???7?#P7????7.            
7???~  ^????~                            :????:      :7???!     ^???7J#@J7?????7.           
7???~   :7???!.                          :????:   .:~7???!.    ~???7Y&@#7777????7.          
7???~    .7???7:      !!!!!!!!!!!!!!!    :????7!!77????7^     ~??775@@@GJJYJ?????7.         
7???~     .!????^     7?????????????7.   :?????????7!~:      !????G@@@@@@@@5??????7:        
::::.       :::::     :::::::::::::::    .::::::::..        .::::JGGGB@@@&7:::::::::
        _       _               _     _                               ?@@#~
   ___ | |_ ___| |     __ _  __| | __| |     ___  _ __                P@B^
  / _ \| __/ _ \ |    / _` |/ _` |/ _` |___ / _ \| '_ \             :&G:
 | (_) | ||  __/ |   | (_| | (_| | (_| |___| (_) | | | |            !5.
  \___/ \__\___|_|    \__,_|\__,_|\__,_|    \___/|_| |_| {{ printf "%-9s" .Chart.Version }}  ,
                                                                    .
{{- end }}
{{- $collectors := include "operatorCrs" . | fromJsonArray }}
Following components were installed:
{{- if .Values.deployScaler }}
 âœ“ KEDA-OTel add-on - ğŸ¿
{{- end }}
{{- if .Values.otelOperator.enabled }}
 âœ“ OTel Operator - ğŸ¦‘
{{- end }}
{{- range $collectors }}
 âœ“ OTel Collector with name '{{ .name | default $.Release.Name }}' (using the operator) -
{{- if .targetAllocatorEnabled -}}
{{- printf " target allocator mode watching Prom's CRs ğŸ¯" -}}
{{- else -}}
{{- printf " ğŸš€" -}}
{{- end -}}
{{- end }}
{{- if .Values.otelCollector.enabled }}
 âœ“ OTel Collector (using the helm chart) - ğŸ‘·
{{- $collectors = append $collectors (mergeOverwrite .Values.otelCollector (dict "helm" true)) -}}
{{- end }}

Architecture:
{{- $char := "" -}}
{{- $isAnySidecar := false -}}
{{- $m := "" -}}
{{- if .Values.otelOperator.enabled }}
                   â”â”â”â”â”â”“
                   â”ƒ ğŸ¦‘ â”ƒ
                  â•­â•„â”¯â”¯â”¯â”¯â•ƒâ•®

{{- end }}
{{- printf "\n" -}}
{{- if $collectors }}
{{- range $collectors }}
{{- printf "   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    " -}}
{{- end }}
{{- printf "\n" -}}
{{- range $collectors }}
{{- $char = "ğŸš€" -}}
{{- if .helm -}}
{{- $char = "ğŸ‘·" -}}
{{- end -}}
{{- if .targetAllocatorEnabled -}}
{{- $char = "ğŸ¯" -}}
{{- end -}}
{{- printf "   â”‚      %s      â”‚    " $char -}}
{{- end }}
{{- printf "\n" -}}
{{- range $collectors }}
{{- printf "   â”‚ %-13sâ”‚    " ((.name | default $.Release.Name) | trunc 11) -}}
{{- end }}
{{- printf "  (Collectors)" -}}
{{- printf "\n" -}}
{{- range $collectors }}
{{- $m = .mode -}}

{{- if eq .mode "sidecar" -}}
{{- $isAnySidecar = true -}}
{{- if .targetAllocatorEnabled -}}
{{- $m = "statefulset" -}}
{{- end -}}
{{- end -}}
{{- printf "   â”‚ %-13sâ”‚    " (printf "â€¢%s" ($m | trunc 11)) -}}
{{- end }}
{{- printf "\n" -}}
{{- range $collectors }}
{{- printf "   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    " -}}
{{- end }}
{{- printf "\n" -}}
{{- if and .Values.deployScaler $collectors }}
{{- printf " â”" -}}
{{- end }}
{{- range $i, $cr := $collectors }}
{{- if eq $i (sub (len ($collectors)) 1) -}}
{{- printf "â•ºâ•ºâ•ºâ•ºâ•ºâ•ºâ•ºâ•ºâ•ºâ”›" -}}
{{- else -}}
{{- printf "â•ºâ•ºâ•ºâ•ºâ•ºâ•ºâ•ºâ•ºâ•ºâ”»â•ºâ•ºâ•ºâ•ºâ•ºâ•ºâ•ºâ•ºâ•ºâ•ºâ•ºâ•ºâ•º" -}}
{{- end -}}
{{- end }}
{{- printf "\n" -}}
{{- if and .Values.deployScaler  $collectors }}
{{- printf " â•µ \n â•µ \n â•µ   " -}}
{{- end }}
{{- else }}
(No collectors yet)
{{- printf "\n" -}}
{{- end }}

{{- if .Values.deployScaler }}
{{- printf "  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®         â•­â•¶â•¶â•¶â•¶â•¶â•¶â•®\n" -}}
{{- if $collectors -}}{{- printf " â””â•´â•´â†’" -}}{{- end -}}
{{- printf "  â”‚ KEDA OTel Scaler ğŸ¿ â”‚ â†â•´â•´â•´â•´â•´â†’ â”‚ KEDA â”‚\n" -}}
{{- if $collectors -}}{{- printf "     " -}}{{- end -}}
{{- printf "  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯         â•°â•¶â•¶â•¶â•¶â•¶â•¶â•¯\n" -}}
{{- end }}

{{- if and $isAnySidecar (or (not .Values.otelOperator.admissionWebhooks.create) (eq .Values.otelOperator.manager.env.ENABLE_WEBHOOKS "false")) }}
!!! WARNING !!!
sidecar injection is not going to work without enabling the mutating webhooks,
use helm ... -f https://raw.githubusercontent.com/kedify/otel-add-on/refs/heads/main/helmchart/otel-add-on/enable-operator-hooks-values.yaml
{{- end }}
